(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var c=s[i];0!==n[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},a=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0196":function(e,t,s){"use strict";s("d2e7")},"034f":function(e,t,s){"use strict";s("85ec")},"1afc":function(e,t,s){},"27bc":function(e,t,s){},"3df3":function(e,t,s){"use strict";s("c39c")},"3e80":function(e,t,s){"use strict";s("6768")},4678:function(e,t,s){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id="4678"},5273:function(e,t,s){"use strict";s("27bc")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view",{key:e.reload,attrs:{user:e.user,socket:e.socket,configuration:e.configuration,cachedMovie:e.cachedMovie},on:{login:e.login,signout:e.signout,setCachedMovie:e.setCachedMovie,declineRequest:e.declineRequest}}),e.modal?s("Modal",{on:{close:e.closeModal}},["request"===e.modalType?s("div",[s("h4",[e._v("You have a new request!")]),s("p",[e._v(" "+e._s(e.modalUser.name)+" "),s("b-button",{attrs:{id:e.modalUser.id,variant:"outline-success"},on:{click:function(t){return e.acceptRequest(t)}}},[e._v("Accept")]),s("b-button",{attrs:{id:e.modalUser.id,variant:"outline-danger"},on:{click:function(t){return e.declineRequest(t)}}},[e._v("Decline")])],1)]):e._e(),"accept"===e.modalType?s("div",[s("h4",[e._v("You're request to "+e._s(e.modalUser.name)+" got accepted!")])]):e._e()]):e._e()],1)},a=[],o=(s("fb6a"),s("b0c0"),s("b64b"),s("ac1f"),s("96cf"),s("1da1")),i=(s("99af"),s("bc3a")),c=s.n(i),u=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,s,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,c()({method:t,url:"".concat(n,"/v1").concat(s),headers:{Authorization:"Bearer ".concat(localStorage.getItem("user-token"))},data:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e["catch"](1),console.log("fetchServerData",e.t0.response.data),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s,r){return e.apply(this,arguments)}}(),l=u,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Backdrop",{nativeOn:{click:function(t){return e.$emit("close")}}}),s("div",{staticClass:"_modal"},[s("b-icon",{ref:"x",staticClass:"rounded-circle bg-light p2",attrs:{icon:"x",variant:"dark","font-scale":"2.3"},on:{click:function(t){return e.$emit("close")}}}),e._t("default")],2)],1)},m=[],h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"backdrop"})},f=[],p={name:"Backdrop"},v=p,g=(s("3e80"),s("2877")),b=Object(g["a"])(v,h,f,!1,null,null,null),k=b.exports,w={name:"Modal",components:{Backdrop:k}},_=w,j=(s("5273"),Object(g["a"])(_,d,m,!1,null,"a4e4ef14",null)),y=j.exports,x={name:"App",data:function(){return{user:{},modalType:"",modal:!1,modalUser:{},socket:null,configuration:{},cachedMovie:{},reload:0}},components:{Modal:y},methods:{closeModal:function(){var e=this;this.modal=!1,this.modalUser={},setTimeout((function(){e.reload++}),300)},setCachedMovie:function(e){this.cachedMovie=e},login:function(e){console.log(e),this.user=e,this.user.name=this.user.name.charAt(0).toUpperCase()+this.user.name.slice(1),localStorage.setItem("user-id",e.id),this.$router.push({path:"/rate"}),this.getConfigurationTMDB(),this.wsConnect()},getUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("get","/users/".concat(t));case 3:s=e.sent,this.user=s.data,this.user.name=this.user.name.charAt(0).toUpperCase()+this.user.name.slice(1),this.$router.push({path:"/rate"}),this.getConfigurationTMDB(),this.wsConnect(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}(),acceptRequest:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("post","/connect/accept/".concat(t.currentTarget.id),{email:this.requestEmail});case 3:s=e.sent,this.modal=!1,this.socket.send(JSON.stringify({type:"accept",data:{sender:{name:this.user.name,id:this.user.id},receiver:{name:s.data.receiver.name,id:s.data.receiver.id}}})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:setTimeout((function(){r.reload++}),300);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),declineRequest:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("post","/connect/decline/".concat(t.currentTarget.id));case 3:s=e.sent,this.modal=!1,console.log(s.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),wsConnect:function(){var e,t=this;console.log("Initiating ws connect...");var s=/.*\/\/([\w.-]*)/,r=window.location.href;e="wss://"+s.exec(r)[1]+":8081",this.socket=new WebSocket(e),this.socket.onopen=function(){t.socket.send(JSON.stringify({type:"login",data:{user:{name:t.user.name,id:t.user.id}}}))},this.socket.onmessage=function(e){var s=JSON.parse(e.data);switch(s.type){case"message":console.log(s.data);break;case"newRequest":console.log(s.sender),t.modal||(t.modal=!0,t.modalType="request",t.modalUser=s.sender);break;case"accept":t.modal||(t.newAccept=s.sender,t.modal=!0,t.modalType="accept",t.modalUser=s.sender);break}},this.socket.onclose=function(){Object.keys(t.user).length>0?(console.log("Reconnect in 10 seconds..."),setTimeout((function(){t.wsConnect()}),1e4)):console.log("Socket disconnected")},this.socket.onerror=function(e){console.log("error",e)}},getConfigurationTMDB:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("get","/movie/configuration");case 3:t=e.sent,console.log("CONFIG",t.data),this.configuration.TMDB=t.data.configuration,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),signout:function(){this.user={},localStorage.removeItem("user-id"),localStorage.removeItem("user-token"),this.cachedMovie={},this.configuration={},this.socket.close(),this.$router.push({path:"/"})}},mounted:function(){var e=this;setTimeout((function(){var t=localStorage.getItem("user-token"),s=localStorage.getItem("user-id");t&&s?e.getUser(s):"/"!==e.$router.history.current.path&&e.$router.push({path:"/"})}),1e3)}},M=x,q=(s("034f"),Object(g["a"])(M,n,a,!1,null,null,null)),C=q.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"landing"},[r("div",{staticClass:"background-image popcorn",attrs:{alt:""}},[r("div",{staticClass:"logo-container"},[r("div",{staticClass:"logo-wrapper"},[r("img",{staticClass:"mm-logo",attrs:{src:s("fbef"),alt:""}}),r("div",{staticClass:"tmdb-logo-wrapper"},[r("h3",[e._v("Powered by:")]),r("a",{attrs:{href:"#"}},[r("tmdbLogoBig",{staticClass:"tmdb-logo"})],1)])])])]),r("div",{staticClass:"background-image watching"}),r("div",{staticClass:"form"},[r("b-tabs",{attrs:{"content-class":"mt-3"}},[r("b-tab",{attrs:{title:"Register",active:""},on:{click:function(t){e.errorMessage=""}}},[r("b-form",{staticClass:"register",on:{submit:e.submitRegister}},[r("b-form-group",{attrs:{label:"Name"}},[r("b-form-input",{attrs:{type:"text",required:""},model:{value:e.register.name,callback:function(t){e.$set(e.register,"name",t)},expression:"register.name"}})],1),r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{attrs:{type:"email",required:""},model:{value:e.register.email,callback:function(t){e.$set(e.register,"email",t)},expression:"register.email"}})],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{attrs:{type:"password",required:""},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password",t)},expression:"register.password"}})],1),r("b-form-group",{attrs:{label:"Confirm password"}},[r("b-form-input",{attrs:{type:"password",required:""},model:{value:e.register.password2,callback:function(t){e.$set(e.register,"password2",t)},expression:"register.password2"}})],1),r("b-button",{attrs:{type:"submit"}},[e._v("Submit")]),r("b-alert",{attrs:{fade:"",variant:"danger",show:""!==e.errorMessage,dismissible:""}},[e._v(" "+e._s(e.errorMessage)+" ")])],1)],1),r("b-tab",{attrs:{title:"Login"},on:{click:function(t){e.errorMessage=""}}},[r("b-form",{on:{submit:e.submitLogin}},[r("b-form-group",{attrs:{label:"Email"}},[r("b-form-input",{attrs:{type:"email",required:""},model:{value:e.login.email,callback:function(t){e.$set(e.login,"email",t)},expression:"login.email"}})],1),r("b-form-group",{attrs:{label:"Password"}},[r("b-form-input",{attrs:{type:"password",required:""},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1),r("b-button",{attrs:{type:"submit"}},[e._v("Submit")]),r("b-alert",{attrs:{fade:"",variant:"danger",show:""!==e.errorMessage,dismissible:""}},[e._v(" "+e._s(e.errorMessage)+" ")])],1)],1)],1)],1)])},O=[],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 185.04 133.4"}},[s("defs",[s("linearGradient",{attrs:{id:"linear-gradient",y1:"66.7",x2:"185.04",y2:"66.7",gradientUnits:"userSpaceOnUse"}},[s("stop",{attrs:{offset:"0","stop-color":"#90cea1"}}),s("stop",{attrs:{offset:"0.56","stop-color":"#3cbec9"}}),s("stop",{attrs:{offset:"1","stop-color":"#00b3e5"}})],1)],1),s("title",[e._v("Asset 4")]),s("g",{attrs:{id:"Layer_2","data-name":"Layer 2"}},[s("g",{attrs:{id:"Layer_1-2","data-name":"Layer 1"}},[s("path",{staticClass:"cls-1",attrs:{d:"M51.06,66.7h0A17.67,17.67,0,0,1,68.73,49h-.1A17.67,17.67,0,0,1,86.3,66.7h0A17.67,17.67,0,0,1,68.63,84.37h.1A17.67,17.67,0,0,1,51.06,66.7Zm82.67-31.33h32.9A17.67,17.67,0,0,0,184.3,17.7h0A17.67,17.67,0,0,0,166.63,0h-32.9A17.67,17.67,0,0,0,116.06,17.7h0A17.67,17.67,0,0,0,133.73,35.37Zm-113,98h63.9A17.67,17.67,0,0,0,102.3,115.7h0A17.67,17.67,0,0,0,84.63,98H20.73A17.67,17.67,0,0,0,3.06,115.7h0A17.67,17.67,0,0,0,20.73,133.37Zm83.92-49h6.25L125.5,49h-8.35l-8.9,23.2h-.1L99.4,49H90.5Zm32.45,0h7.8V49h-7.8Zm22.2,0h24.95V77.2H167.1V70h15.35V62.8H167.1V56.2h16.25V49h-24ZM10.1,35.4h7.8V6.9H28V0H0V6.9H10.1ZM39,35.4h7.8V20.1H61.9V35.4h7.8V0H61.9V13.2H46.75V0H39Zm41.25,0h25V28.2H88V21h15.35V13.8H88V7.2h16.25V0h-24Zm-79,49H9V57.25h.1l9,27.15H24l9.3-27.15h.1V84.4h7.8V49H29.45l-8.2,23.1h-.1L13,49H1.2Zm112.09,49H126a24.59,24.59,0,0,0,7.56-1.15,19.52,19.52,0,0,0,6.35-3.37,16.37,16.37,0,0,0,4.37-5.5A16.91,16.91,0,0,0,146,115.8a18.5,18.5,0,0,0-1.68-8.25,15.1,15.1,0,0,0-4.52-5.53A18.55,18.55,0,0,0,133.07,99,33.54,33.54,0,0,0,125,98H113.29Zm7.81-28.2h4.6a17.43,17.43,0,0,1,4.67.62,11.68,11.68,0,0,1,3.88,1.88,9,9,0,0,1,2.62,3.18,9.87,9.87,0,0,1,1,4.52,11.92,11.92,0,0,1-1,5.08,8.69,8.69,0,0,1-2.67,3.34,10.87,10.87,0,0,1-4,1.83,21.57,21.57,0,0,1-5,.55H121.1Zm36.14,28.2h14.5a23.11,23.11,0,0,0,4.73-.5,13.38,13.38,0,0,0,4.27-1.65,9.42,9.42,0,0,0,3.1-3,8.52,8.52,0,0,0,1.2-4.68,9.16,9.16,0,0,0-.55-3.2,7.79,7.79,0,0,0-1.57-2.62,8.38,8.38,0,0,0-2.45-1.85,10,10,0,0,0-3.18-1v-.1a9.28,9.28,0,0,0,4.43-2.82,7.42,7.42,0,0,0,1.67-5,8.34,8.34,0,0,0-1.15-4.65,7.88,7.88,0,0,0-3-2.73,12.9,12.9,0,0,0-4.17-1.3,34.42,34.42,0,0,0-4.63-.32h-13.2Zm7.8-28.8h5.3a10.79,10.79,0,0,1,1.85.17,5.77,5.77,0,0,1,1.7.58,3.33,3.33,0,0,1,1.23,1.13,3.22,3.22,0,0,1,.47,1.82,3.63,3.63,0,0,1-.42,1.8,3.34,3.34,0,0,1-1.13,1.2,4.78,4.78,0,0,1-1.57.65,8.16,8.16,0,0,1-1.78.2H165Zm0,14.15h5.9a15.12,15.12,0,0,1,2.05.15,7.83,7.83,0,0,1,2,.55,4,4,0,0,1,1.58,1.17,3.13,3.13,0,0,1,.62,2,3.71,3.71,0,0,1-.47,1.95,4,4,0,0,1-1.23,1.3,4.78,4.78,0,0,1-1.67.7,8.91,8.91,0,0,1-1.83.2h-7Z"}})])])])])},L=[],$={name:"tmdb-logo-big"},E=$,A=(s("6d4f"),Object(g["a"])(E,S,L,!1,null,null,null)),T=A.exports,V={name:"Landing",components:{tmdbLogoBig:T},data:function(){return{register:{name:"",email:"",password:"",password2:""},login:{email:"",password:""},errorMessage:""}},props:["user"],mounted:function(){this.user.id&&this.$router.push("/rate")},methods:{submitRegister:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.register.password===this.register.password2){e.next=5;break}this.displayError("Passwords don't match!"),e.next=12;break;case 5:return t=this.register,s=t.name,r=t.password,n=this.register.email.toLowerCase(),a={name:s,email:n,password:r},e.next=10,l("post","/auth/register",a);case 10:o=e.sent,201===o.status?(localStorage.setItem("user-token",o.data.tokens.access.token),this.$emit("login",o.data.user)):(console.log(o),o.data.message&&this.displayError(o.data.message));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),submitLogin:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.login.password,s=this.login.email.toLowerCase(),r={email:s,password:t},e.prev=3,e.next=6,l("post","/auth/login",r);case 6:n=e.sent,200===n.status?(localStorage.setItem("user-token",n.data.tokens.access.token),this.$emit("login",n.data.user)):(console.log(n.data.message),n.data.message&&this.displayError(n.data.message)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}(),displayError:function(e){var t=this;this.errorMessage="",setTimeout((function(){t.errorMessage=e}),200)}}},H=V,D=(s("9cd7"),Object(g["a"])(H,R,O,!1,null,"2d4ae0b4",null)),z=D.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.userIsLoggedIn?s("div",{staticClass:"cockpit"},[s("Navbar",{attrs:{user:e.user},on:{signout:function(t){return e.$emit("signout")}}}),s("Matcher",{attrs:{user:e.user,configuration:e.configuration,cachedMovie:e.cachedMovie},on:{setCachedMovie:e.setCachedMovie}})],1):e._e()},Z=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("b-navbar",{attrs:{type:"dark",variant:"primary",fixed:"top"}},[s("b-navbar-brand",{attrs:{href:"#/rate"}},[e._v("MovieMatch")]),s("tmdbLogo"),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("em",[e._v(e._s(e.user.name))])]},proxy:!0}])},[s("b-dropdown-item",{attrs:{href:"#"}},[e._v("Profile")]),s("b-dropdown-item",{attrs:{href:"#/friends"}},[e._v(" Friends ")]),s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("signout")}}},[e._v("Sign Out")])],1)],1)],1)],1)])},F=[],P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 273.42 35.52"}},[s("defs",[s("linearGradient",{attrs:{id:"linear-gradient",y1:"17.76",x2:"273.42",y2:"17.76",gradientUnits:"userSpaceOnUse"}},[s("stop",{attrs:{offset:"0","stop-color":"#90cea1"}}),s("stop",{attrs:{offset:"0.56","stop-color":"#3cbec9"}}),s("stop",{attrs:{offset:"1","stop-color":"#00b3e5"}})],1)],1),s("title",[e._v("Asset 3")]),s("g",{attrs:{id:"Layer_2","data-name":"Layer 2"}},[s("g",{attrs:{id:"Layer_1-2","data-name":"Layer 1"}},[s("path",{staticClass:"cls-1",attrs:{d:"M191.85,35.37h63.9A17.67,17.67,0,0,0,273.42,17.7h0A17.67,17.67,0,0,0,255.75,0h-63.9A17.67,17.67,0,0,0,174.18,17.7h0A17.67,17.67,0,0,0,191.85,35.37ZM10.1,35.42h7.8V6.92H28V0H0v6.9H10.1Zm28.1,0H46V8.25h.1L55.05,35.4h6L70.3,8.25h.1V35.4h7.8V0H66.45l-8.2,23.1h-.1L50,0H38.2ZM89.14.12h11.7a33.56,33.56,0,0,1,8.08,1,18.52,18.52,0,0,1,6.67,3.08,15.09,15.09,0,0,1,4.53,5.52,18.5,18.5,0,0,1,1.67,8.25,16.91,16.91,0,0,1-1.62,7.58,16.3,16.3,0,0,1-4.38,5.5,19.24,19.24,0,0,1-6.35,3.37,24.53,24.53,0,0,1-7.55,1.15H89.14Zm7.8,28.2h4a21.66,21.66,0,0,0,5-.55A10.58,10.58,0,0,0,110,26a8.73,8.73,0,0,0,2.68-3.35,11.9,11.9,0,0,0,1-5.08,9.87,9.87,0,0,0-1-4.52,9.17,9.17,0,0,0-2.63-3.18A11.61,11.61,0,0,0,106.22,8a17.06,17.06,0,0,0-4.68-.63h-4.6ZM133.09.12h13.2a32.87,32.87,0,0,1,4.63.33,12.66,12.66,0,0,1,4.17,1.3,7.94,7.94,0,0,1,3,2.72,8.34,8.34,0,0,1,1.15,4.65,7.48,7.48,0,0,1-1.67,5,9.13,9.13,0,0,1-4.43,2.82V17a10.28,10.28,0,0,1,3.18,1,8.51,8.51,0,0,1,2.45,1.85,7.79,7.79,0,0,1,1.57,2.62,9.16,9.16,0,0,1,.55,3.2,8.52,8.52,0,0,1-1.2,4.68,9.32,9.32,0,0,1-3.1,3A13.38,13.38,0,0,1,152.32,35a22.5,22.5,0,0,1-4.73.5h-14.5Zm7.8,14.15h5.65a7.65,7.65,0,0,0,1.78-.2,4.78,4.78,0,0,0,1.57-.65,3.43,3.43,0,0,0,1.13-1.2,3.63,3.63,0,0,0,.42-1.8A3.3,3.3,0,0,0,151,8.6a3.42,3.42,0,0,0-1.23-1.13A6.07,6.07,0,0,0,148,6.9a9.9,9.9,0,0,0-1.85-.18h-5.3Zm0,14.65h7a8.27,8.27,0,0,0,1.83-.2,4.67,4.67,0,0,0,1.67-.7,3.93,3.93,0,0,0,1.23-1.3,3.8,3.8,0,0,0,.47-1.95,3.16,3.16,0,0,0-.62-2,4,4,0,0,0-1.58-1.18,8.23,8.23,0,0,0-2-.55,15.12,15.12,0,0,0-2.05-.15h-5.9Z"}})])])])])},U=[],B={name:"tmdb-logo-small"},Y=B,J=(s("3df3"),Object(g["a"])(Y,P,U,!1,null,"7b800a90",null)),G=J.exports,X={name:"Navbar",props:["user"],components:{tmdbLogo:G}},W=X,K=Object(g["a"])(W,N,F,!1,null,null,null),Q=K.exports,ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("Loader"):e._e(),e.info||e.loading?e._e():s("div",{staticClass:"matcher"},[s("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:e.swiped,expression:"swiped",arg:"swipe"},{name:"touch",rawName:"v-touch:tap",value:e.clickedPoster,expression:"clickedPoster",arg:"tap"},{name:"touch",rawName:"v-touch:moving",value:e.touchMoving,expression:"touchMoving",arg:"moving"},{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],staticClass:"content-wrapper"},[e.movie.poster_path?s("img",{ref:"poster",staticClass:"poster",attrs:{src:e.posterSource,alt:""},on:{click:e.clickedPoster}}):e._e(),s("div",{staticClass:"text-wrapper"},[e.movie.title?s("h1",{staticClass:"title"},[e._v(e._s(e.movie.title))]):e._e(),e.movie.overview?s("p",{staticClass:"overview"},[s("span",{staticClass:"inline-title"},[e._v(e._s(e.movie.title)+" ("+e._s(e.releaseYear)+")")]),e._v(" "+e._s(e.movie.overview)+" ")]):e._e()])]),e.info?e._e():s("div",{staticClass:"icons"},[s("b-icon",{ref:"x",staticClass:"rounded-circle bg-danger p2",attrs:{icon:"x",variant:"dark","font-scale":"5"},on:{click:function(t){return e.rate("dislikes")}}}),s("b-icon",{attrs:{icon:"eye-fill",variant:"primary","font-scale":"5"},on:{click:function(t){return e.rate("seen")}}}),s("b-icon",{attrs:{icon:"star-fill",variant:"warning","font-scale":"5"},on:{click:function(t){return e.rate("favourites")}}}),s("b-icon",{attrs:{icon:"heart-fill",variant:"danger","font-scale":"5"},on:{click:function(t){return e.rate("likes")}}})],1)]),e.info?s("Info",{attrs:{configuration:e.configuration,movie:e.movieDetails,backdropSource:e.backdropSource},on:{close:function(t){e.info=!1}}}):e._e(),e.matches.length>0?s("Modal",{on:{close:function(t){return e.closeMatchModal()}}},[e._v(" You've got a match! "),s("br"),e._v(" Go, and watch "),s("strong",[e._v(e._s(this.movie.title))]),e._v(" with: "),s("ul",e._l(e.matches,(function(t){return s("li",{key:t.friend.id},[e._v(" "+e._s(t.friend.name)+" ")])})),0)]):e._e()],1)},te=[],se=s("c1df"),re=s.n(se),ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("Loader"):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.loading,expression:"loading === false"}],staticClass:"info"},[s("img",{staticClass:"backdrop-image desktop",attrs:{src:e.backdropSource},on:{load:function(t){e.loading=!1}}}),s("img",{ref:"backdropMobile",staticClass:"backdrop-image mobile",on:{load:function(t){e.loading=!1}}}),s("div",{staticClass:"filter"}),s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.close,expression:"close",arg:"tap"}],staticClass:"text"},[s("ul",{staticClass:"list"},[s("li",[e._v(" Original title: ")]),s("li",[s("strong",[e._v(e._s(e.movie.original_title))])]),e.movie.tagline?s("li",[e._v(" Tagline: ")]):e._e(),e.movie.tagline?s("li",[s("strong",[e._v('"'+e._s(e.movie.tagline)+'"')])]):e._e()]),s("h4",[e._v("Overview")]),s("p",[e._v(e._s(e.movie.overview))]),s("ul",{staticClass:"list"},[s("li",[e._v(" Genres: ")]),s("ul",e._l(e.movie.genres,(function(t){return s("li",{key:t.id,staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])})),0),s("li",[e._v(" Production countries: ")]),s("ul",e._l(e.movie.production_countries,(function(t){return s("li",{key:t.id,staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])})),0),s("li",[e._v("Release date:")]),s("li",[s("strong",[e._v(e._s(e.movie.release_date))])]),s("li",[e._v("Runtime:")]),s("li",[s("strong",[e._v(e._s(e.movie.runtime)+" minutes")])]),s("li",[e._v(" Spoken languages: ")]),s("ul",e._l(e.movie.spoken_languages,(function(t){return s("li",{key:t.iso_639_1,staticClass:"tag"},[e._v(" "+e._s(t.english_name)+" ")])})),0),s("li",[e._v("Average vote:")]),s("li",[s("strong",[e._v(e._s(e.movie.vote_average))])]),s("li",[e._v("Vote count:")]),s("li",[s("strong",[e._v(e._s(e.movie.vote_count))])]),s("li",[e._v("Popularity:")]),s("li",[s("strong",[e._v(e._s(e.movie.popularity))])])]),s("div",{staticClass:"links"},[s("a",{attrs:{href:"https://www.imdb.com/title/"+e.movie.imdb_id,target:"_blank"}},[e._v("View on IMDB")]),s("a",{attrs:{href:"https://www.themoviedb.org/movie/"+e.movie.id,target:"_blank"}},[e._v("View on TMDB")])])]),s("button",{staticClass:"back",on:{click:e.close}},[s("b-icon-arrow-left-short")],1)])],1)},ae=[],oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-spinner",{attrs:{label:"Spinning"}})},ie=[],ce={name:"Loader"},ue=ce,le=(s("ac88"),Object(g["a"])(ue,oe,ie,!1,null,null,null)),de=le.exports,me={name:"info",props:["configuration","movie","backdropSource"],components:{Loader:de},data:function(){return{loading:!0}},mounted:function(){console.log(this.backdropSource),this.$refs.backdropMobile.style.backgroundImage="url(".concat(this.backdropSource,")")},methods:{close:function(){this.$emit("close")}}},he=me,fe=(s("0196"),Object(g["a"])(he,ne,ae,!1,null,"272171db",null)),pe=fe.exports,ve={name:"Matcher",mounted:function(){0===Object.keys(this.cachedMovie).length?this.randomMovie():this.movie=this.cachedMovie},data:function(){return{movie:{},info:!1,movieDetails:{},loading:!1,matches:[],swipeStart:null,swipeEnd:null}},props:["user","configuration","cachedMovie"],components:{Info:pe,Loader:de,Modal:y},methods:{touchMoving:function(e){this.swipeEnd=e.touches[0].clientX;var t=this.swipeEnd-this.swipeStart;this.$refs.poster.style.transform="translateX(".concat(Math.round(t),"px)")},touchStart:function(e){this.swipeStart=e.touches[0].clientX},touchEnd:function(){this.$refs.poster.style.transform="none",this.swipeStart=null,this.swipeEnd=null},swiped:function(e){switch(e){case"left":this.rate("dislikes");break;case"right":this.rate("likes");break;default:break}},clickedPoster:function(){this.info=!0,this.getInfo(this.movie.id)},tapped:function(){this.info=!0},getInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.movieDetails.id==this.movie.id){e.next=7;break}return e.next=4,l("get","/movie/single/".concat(t));case 4:s=e.sent,r=s.data.movie,this.movieDetails=r;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),randomDate:function(){return re()(new Date(+new Date-Math.floor(1.5*Math.random()*Math.pow(10,12)))).format("YYYY-MM-DD")},randomMovie:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,this.movieDetails={},t=this.randomDate(),s=re()(t).subtract(1,"years").format("YYYY-MM-DD"),console.log("Looking for a movie with release date between ".concat(s," and ").concat(t)),e.next=8,l("post","/movie/random",{query:"/discover/movie?vote_average.gte=8&vote_count.gte=1000&primary_release_date.gte=".concat(s,"&primary_release_date.lte=").concat(t)});case 8:r=e.sent,200!==r.status?(console.log("Something went wrong, fetching another movie..."),setTimeout((function(){a.randomMovie()}),500)):(n=r.data.chosenMovie,this.loading=!1,this.movie=n,this.$emit("setCachedMovie",n),console.log(this.movie)),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),e.t0.response&&console.log(e.t0.response.data);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),rate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next="dislikes"===e.t0?4:"likes"===e.t0?6:8;break;case 4:return this.$refs.poster.classList.add("move-left"),e.abrupt("break",9);case 6:return this.$refs.poster.classList.add("move-right"),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:return console.log(this.movie),e.next=12,l("post","/rate/".concat(t),{movie:{title:this.movie.title,id:this.movie.id}});case 12:s=e.sent,200===s.status?(this.user[t].push(this.movie.id),console.log("Succesfully added to ".concat(t," ")),s.data.matches&&s.data.matches.length>0?this.matches=s.data.matches:this.randomMovie()):401===s.status?this.$emit("signout"):403!==s.status&&404!==s.status||(console.log(s.error),this.randomMovie()),this.info=!1,e.next=21;break;case 17:e.prev=17,e.t1=e["catch"](0),console.log(e.t1),this.randomMovie();case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(t){return e.apply(this,arguments)}return t}(),closeMatchModal:function(){this.matches=[],this.randomMovie()}},computed:{posterSource:function(){return this.configuration.TMDB.images.secure_base_url+"w342"+this.movie.poster_path},backdropSource:function(){return this.movie.backdrop_path?this.configuration.TMDB.images.secure_base_url+"w1280"+this.movie.backdrop_path:null},releaseYear:function(){var e=/^..../;return e.exec(this.movie.release_date)[0]}}},ge=ve,be=(s("c361"),Object(g["a"])(ge,ee,te,!1,null,"473bd7e0",null)),ke=be.exports,we={name:"Cockpit",components:{Navbar:Q,Matcher:ke},props:["user","configuration","cachedMovie"],mounted:function(){this.userIsLoggedIn||this.$router.push("/")},methods:{setCachedMovie:function(e){this.$emit("setCachedMovie",e)}},computed:{userIsLoggedIn:function(){return 0!==Object.keys(this.user).length}}},_e=we,je=(s("88d6"),Object(g["a"])(_e,I,Z,!1,null,null,null)),ye=je.exports,xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"friends"},[s("Navbar",{attrs:{user:e.user},on:{signout:function(t){return e.$emit("signout")}}}),e.requestModal?s("Modal",{on:{close:e.closeRequestModal}},[s("p",[e._v("Add a friend by typing her/his email here, and clicking submit.")]),s("b-form",{on:{submit:e.request}},[s("b-form-group",{attrs:{label:"Email:","label-for":"email"}},[s("b-form-input",{attrs:{type:"email"},model:{value:e.requestEmail,callback:function(t){e.requestEmail=t},expression:"requestEmail"}})],1),s("b-form-group",[s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1),e.error?s("h4",{staticClass:"error"},[e._v(e._s(e.error))]):e._e()],1):e._e(),e.mutualLikesModal?s("Modal",{on:{close:e.closeMutualLikesModal}},[e.mutualLikes.length>0?[s("h4",[e._v("You and "+e._s(e.requestedFriend.name)+" both like these movies:")]),s("ul",{staticClass:"mutual-movies"},e._l(e.mutualLikes,(function(t){return s("li",{key:t.id},[s("a",{attrs:{href:"https://www.themoviedb.org/movie/"+t.id,target:"_blank"}},[e._v(e._s(t.title))])])})),0)]:[s("h4",[e._v("You and "+e._s(e.requestedFriend.name)+" don't have any movies in common!")])]],2):e._e(),s("b-container",[s("div",[s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Friends",active:""},on:{click:function(t){return e.getFriends()}}},[s("p",[s("ul",[0===e.friends.length?s("p",[e._v("You don't have any friends yet! "),s("a",{attrs:{href:"#"},on:{click:function(t){e.requestModal=!0}}},[e._v("Add a friend")])]):s("ul",e._l(e.friends,(function(t){return s("li",{key:t.id},[s("a",{attrs:{href:"#"},on:{click:function(s){return e.clickedFriend(t.id)}}},[e._v(e._s(t.name))])])})),0)])])]),s("b-tab",{attrs:{title:"Pending"},on:{click:function(t){return e.getFriends()}}},[e.receivedRequests.length+e.sentRequests.length===0?s("p",[e._v("There are no pending requests right now.")]):s("ul",[e._l(e.receivedRequests,(function(t){return s("li",{key:t.id},[e._v(e._s(t.name)+" "),s("b-button",{attrs:{id:t.id,variant:"outline-success"},on:{click:function(t){return e.acceptRequest(t)}}},[e._v("Accept")]),s("b-button",{attrs:{variant:"outline-danger",id:t.id},on:{click:function(t){return e.declineRequest(t)}}},[e._v("Decline")])],1)})),e._l(e.sentRequests,(function(t){return s("li",{key:t.id},[e._v(e._s(t.name)+" / Waiting his/her response...")])}))],2)])],1)],1),s("a",{attrs:{href:"#"},on:{click:function(t){e.requestModal=!0}}},[e._v("Add a friend")]),s("br"),s("router-link",{attrs:{to:"/rate"}},[e._v("Back")])],1)],1)},Me=[],qe={name:"Friends",data:function(){return{friends:[],receivedRequests:[],sentRequests:[],requestModal:!1,requestedFriend:{},mutualLikesModal:!1,mutualLikes:[],requestEmail:"",error:""}},components:{Modal:y,Navbar:Q},props:["user","socket"],mounted:function(){var e=localStorage.getItem("user-token");e?this.getFriends(e):this.$router.push({path:"/"})},methods:{clickedFriend:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("get","/connect/matches/"+t);case 3:s=e.sent,r=s.data,n=r.mutualLikes,a=r.friend,this.mutualLikes=n,this.requestedFriend=a,this.mutualLikesModal=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),closeMutualLikesModal:function(){this.mutualLikesModal=!1,this.mutualLikes=[],this.requestedFriend={}},getFriends:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Getting friends..."),e.next=4,l("get","/connect/friends");case 4:t=e.sent,this.friends=t.data.friends,this.receivedRequests=t.data.receivedRequests,this.sentRequests=t.data.sentRequests,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),request:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),console.log("send request...."),e.next=5,l("post","/connect/request",{email:this.requestEmail});case 5:s=e.sent,200!==s.status?this.error=s.data.message:(this.closeRequestModal(),this.getFriends(),console.log(this.socket),this.socket.send(JSON.stringify({type:"request",data:{sender:{name:this.user.name,id:this.user.id},receiver:{name:s.data.receiver.name,id:s.data.receiver.id}}})),this.socket.onmessage((function(e){var t=JSON.parse(e.data);"newRequest"===t.type&&r.getFriends()}))),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("request",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),acceptRequest:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("post","/connect/accept/".concat(t.currentTarget.id),{email:this.requestEmail});case 3:s=e.sent,this.closeRequestModal(),this.getFriends(),console.log(s),this.socket.send(JSON.stringify({type:"accept",data:{sender:{name:this.user.name,id:this.user.id},receiver:{name:s.data.receiver.name,id:s.data.receiver.id}}})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),declineRequest:function(e){var t=this;console.log("id:",e.currentTarget.id),this.$emit("declineRequest",e),e.currentTarget.parentElement.remove(),setTimeout((function(){t.getFriends()}),300)},closeRequestModal:function(){this.requestEmail="",this.error="",this.requestModal=!1}}},Ce=qe,Re=(s("b08f"),Object(g["a"])(Ce,xe,Me,!1,null,"1079f96a",null)),Oe=Re.exports,Se=s("8c4f"),Le=s("5f5b"),$e=s("b1e0"),Ee=s("0086"),Ae=s.n(Ee);s("f9e3"),s("2dd8");r["default"].use(Se["a"]),r["default"].use(Le["a"]),r["default"].use($e["a"]),r["default"].use(Ae.a,{swipeTolerance:120,disableClick:!0});var Te=[{path:"/",component:z,name:"landing"},{path:"/rate",component:ye,name:"cockpit"},{path:"/friends",component:Oe,name:"friends"}],Ve=new Se["a"]({routes:Te});r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(C)},router:Ve}).$mount("#app")},"5bf5":function(e,t,s){},6768:function(e,t,s){},"6d4f":function(e,t,s){"use strict";s("1afc")},"85ec":function(e,t,s){},"88d6":function(e,t,s){"use strict";s("f436")},"9cd7":function(e,t,s){"use strict";s("aa90")},aa90:function(e,t,s){},ac88:function(e,t,s){"use strict";s("ec11")},b08f:function(e,t,s){"use strict";s("5bf5")},b57d:function(e,t,s){},c361:function(e,t,s){"use strict";s("b57d")},c39c:function(e,t,s){},d2e7:function(e,t,s){},ec11:function(e,t,s){},f436:function(e,t,s){},fbef:function(e,t,s){e.exports=s.p+"img/mm-logo-3.3387d370.png"}});
//# sourceMappingURL=app.b4ffa021.js.map